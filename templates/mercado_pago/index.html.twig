{% extends 'base.html.twig' %}

{% block title %}PayPal Pay{% endblock %}

{% block javascripts %}
    {{ parent() }}

{% endblock %}


{% block body %}

    <div class="row mt-5 mb-5">
        <div class="col-md-4"></div>
        <div class="col-md-4 text-center">
            <h1>Mercadopago</h1>
            <div id="wallet_container"></div>
            {% if isSandbox %}
                <div class="alert alert-info mt-3" role="alert">
                    Estás operando en el modo <strong>Sandbox</strong> de Mercado Pago. Utilizá credenciales y tarjetas de prueba.
                </div>
            {% endif %}
        </div>
        <div class="col-md-4"></div>
    </div>

    <script>
        const mpOptions = {
            locale: "{{ idiomaPlataforma.codigo ?? 'es-AR' }}"
        };
        {% if isSandbox %}
        mpOptions.advancedFraudPrevention = false;
        {% endif %}
        const mp = new MercadoPago("{{ publicKey }}", mpOptions);
        const walletOptions = {
            initialization: {
                preferenceId: "{{ id }}",
            },
            customization: {
                texts: {
                    valueProp: 'smart_option',
                },
            },
        };
        {% if isSandbox %}
        walletOptions.onReady = () => console.info('Mercado Pago Wallet en modo sandbox');
        {% endif %}
        mp.bricks().create("wallet", "wallet_container", walletOptions);
    </script>
{% endblock %}
